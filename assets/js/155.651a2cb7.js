(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{523:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"请求成功-失败"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#请求成功-失败"}},[s._v("#")]),s._v(" 请求成功/失败")]),s._v(" "),t("p",[s._v("若Forest请求最终以"),t("code",[s._v("ForestResponse")]),s._v("作为返回类型，那么即便在请求过程中出现错误或异常，也不会直接中断抛出异常，且最终始终会返回一个非空的"),t("code",[s._v("ForestResponse")]),s._v("对象")]),s._v(" "),t("p",[s._v("而在"),t("code",[s._v("ForestResponse")]),s._v("对象中提供了一些用来判断这次请求是否成功或失败的方法")]),s._v(" "),t("p",[t("code",[s._v("isSuccess()")]),s._v(" : 网络请求是否成功")]),s._v(" "),t("ul",[t("li",[s._v("返回值 : "),t("code",[s._v("true")]),s._v("表示请求成功，"),t("code",[s._v("false")]),s._v("表示请求失败")])]),s._v(" "),t("p",[t("code",[s._v("isError()")]),s._v(" : 网络请求是否失败")]),s._v(" "),t("ul",[t("li",[s._v("返回值 : "),t("code",[s._v("true")]),s._v("表示请求失败，"),t("code",[s._v("false")]),s._v("表示请求成功")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取网络请求是否成功")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" bSuccess "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isSuccess")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取网络请求是否失败")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" bError "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"错误类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#错误类型"}},[s._v("#")]),s._v(" 错误类型")]),s._v(" "),t("p",[s._v("在Forest请求过程中可能会出现各种各样的错误和异常，比如超时、SSL验证不通过，亦或者是服务端返回一个错误的HTTP状态码")]),s._v(" "),t("p",[s._v("在这些错误中，主要分成两种类型错误：状态码错误，和客户端异常错误")]),s._v(" "),t("h3",{attrs:{id:"状态码错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#状态码错误"}},[s._v("#")]),s._v(" 状态码错误")]),s._v(" "),t("p",[s._v("状态码错误即表示HTTP响应状态码不在成功的范围数值内（100 ~ 399)，比如: 404、500 就是常见的表示失败的状态码")]),s._v(" "),t("p",[s._v("关于状态码的分类与说明，以及如何获取状态码请参见《"),t("RouterLink",{attrs:{to:"/pages/1.5.36/api_response_status/"}},[s._v("响应状态码")]),s._v("》")],1),s._v(" "),t("p",[s._v("以下代码介绍如何判断状态码为失败:")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 判断HTTP状态码是否失败")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" isStatusError "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("statusOk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"异常错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异常错误"}},[s._v("#")]),s._v(" 异常错误")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("getException()")]),s._v(" 获取请求过程中产生的异常")]),s._v(" "),t("ul",[t("li",[t("b",[s._v("返回值")]),s._v(": 异常对象，"),t("code",[s._v("Throwable")]),s._v("的子类对象")])])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取请求过程中产生的异常")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" exception "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("exception "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"请求异常: "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" exception"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"超时错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#超时错误"}},[s._v("#")]),s._v(" 超时错误")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("isTimeout()")]),s._v(" 请求是否超时")]),s._v(" "),t("ul",[t("li",[t("b",[s._v("返回值")]),s._v(": "),t("code",[s._v("true")]),s._v("表示已超时, "),t("code",[s._v("false")]),s._v("表示未超时")])])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取请求是否超时")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" bTimeout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);