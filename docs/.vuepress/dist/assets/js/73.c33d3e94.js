(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{389:function(a,s,t){"use strict";t.r(s);var e=t(6),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("模板表达式最原始的目的就是各种各样的数据动态绑定到HTTP请求的各个属性中，要完成这一步就要实现对外部数据的引用。")]),a._v(" "),s("p",[a._v("Forest的模板表达式提供了两种最基本的数据引用方式： "),s("code",[a._v("变量名引用")]),a._v("、"),s("code",[a._v("参数序号引用")])]),a._v(" "),s("p",[a._v("如上面Hello World例子所示，表达式中可以直接引用"),s("code",[a._v("@Var")]),a._v("或 "),s("code",[a._v("@DataVariable")]),a._v(" 所标注的变量名。除此之外也可以直接引用全局配置中定义的全局变量名。")]),a._v(" "),s("p",[a._v("全局变量名可以在 "),s("code",[a._v("yaml")]),a._v(" 配置文件中定义")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("forest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("variables")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" foo\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" bar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("也可以在 "),s("code",[a._v("properties")]),a._v(" 配置文件中定义")]),a._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("forest.variables.a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("foo")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("forest.variables.b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("bar")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("注意")]),a._v(" "),s("p",[a._v("无论是"),s("code",[a._v("yaml")]),a._v("配置文件还是"),s("code",[a._v("properties")]),a._v("配置文件，其定义的 Forest 全局变量必须定义在 "),s("code",[a._v("forest.variables")]),a._v(" 之下，否则无法被引用到")])]),a._v(" "),s("p",[a._v("我们在全局配置中定义了两个全局变量，分别为"),s("code",[a._v("a")]),a._v("和"),s("code",[a._v("b")]),a._v("。接着就可以在"),s("code",[a._v("@Request")]),a._v("中同时引用这两个变量。")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("url "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http://localhost:8080/{a}/{b}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("调用"),s("code",[a._v("send()")]),a._v("方法后产生的"),s("code",[a._v("url")]),a._v("的值为：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("http://localhost:8080/foo/bar\n")])])]),s("p",[a._v("这里因为是全局变量，"),s("code",[a._v("{a}")]),a._v("和"),s("code",[a._v("{b}")]),a._v("的值分别来自全局配置中的变量"),s("code",[a._v("a")]),a._v("和"),s("code",[a._v("b")]),a._v("的值，也就是"),s("code",[a._v("foo")]),a._v("和"),s("code",[a._v("bar")]),a._v("，所以并不需要在方法中传入额外的参数。")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("与配置属性引用的异同")]),a._v(" "),s("ol",[s("li",[a._v("配置属性引用以井号("),s("code",[a._v("#")]),a._v(")开头，如"),s("code",[a._v("#{a}")]),a._v("。变量引用以花括号包裹或者以美元符号("),s("code",[a._v("$")]),a._v(")开头的花括号包裹，如 "),s("code",[a._v("{a}")]),a._v("、"),s("code",[a._v("${a}")])]),a._v(" "),s("li",[a._v("配置属性只是简单的字符串，不能进行后续操作，而变量是可以当作类似java对象进行操作，某方法调用，和子属性访问")]),a._v(" "),s("li",[a._v("在配置文件("),s("code",[a._v("application.yml")]),a._v(" 或 "),s("code",[a._v("application.properties")]),a._v(")中定义的变量，必须在"),s("code",[a._v("forest.variables")]),a._v("下，否则引用不到")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);