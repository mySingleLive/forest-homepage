---
id: base_request
hide_title: false
title: ğŸ§ æ¥å£æ³¨è§£
date: 2022-07-01 12:44:20
permalink: /pages/1.5.31/base_request/
---

## @BaseRequest æ³¨è§£

`@BaseRequest`æ³¨è§£å®šä¹‰åœ¨æ¥å£ç±»ä¸Šï¼Œåœ¨`@BaseRequest`ä¸Šå®šä¹‰çš„å±æ€§ä¼šè¢«åˆ†é…åˆ°è¯¥æ¥å£ä¸­æ¯ä¸€ä¸ªæ–¹æ³•ä¸Šï¼Œä½†æ–¹æ³•ä¸Šå®šä¹‰çš„è¯·æ±‚å±æ€§ä¼šè¦†ç›–`@BaseRequest`ä¸Šé‡å¤å®šä¹‰çš„å†…å®¹ã€‚
å› æ­¤å¯ä»¥è®¤ä¸º`@BaseRequest`ä¸Šå®šä¹‰çš„å±æ€§å†…å®¹æ˜¯æ‰€åœ¨æ¥å£ä¸­æ‰€æœ‰è¯·æ±‚çš„é»˜è®¤å±æ€§ã€‚


```java
/**
 * @BaseRequest ä¸ºé…ç½®æ¥å£å±‚çº§è¯·æ±‚ä¿¡æ¯çš„æ³¨è§£
 * å…¶å±æ€§ä¼šæˆä¸ºè¯¥æ¥å£ä¸‹æ‰€æœ‰è¯·æ±‚çš„é»˜è®¤å±æ€§
 * ä½†å¯ä»¥è¢«æ–¹æ³•ä¸Šå®šä¹‰çš„å±æ€§æ‰€è¦†ç›–
 */
@BaseRequest(
    baseURL = "http://localhost:8080",     // é»˜è®¤åŸŸå
    headers = {
        "Accept:text/plain"                // é»˜è®¤è¯·æ±‚å¤´
    },
    sslProtocol = "TLS"                    // é»˜è®¤å•å‘SSLåè®®
)
public interface MyClient {
  
    // æ–¹æ³•çš„URLä¸å¿…å†å†™åŸŸåéƒ¨åˆ†
    @Get("/hello/user")
    String send1(@Query("username") String username);

    // è‹¥æ–¹æ³•çš„URLæ˜¯å®Œæ•´åŒ…å«http://å¼€å¤´çš„ï¼Œé‚£ä¹ˆä¼šä»¥æ–¹æ³•çš„URLä¸­åŸŸåä¸ºå‡†ï¼Œä¸ä¼šè¢«æ¥å£å±‚çº§ä¸­çš„baseURLå±æ€§è¦†ç›–
    @Get("http://www.xxx.com/hello/user")
    String send2(@Query("username") String username);
  

    @Get(
        url = "/hello/user",
        headers = {
            "Accept:application/json"      // è¦†ç›–æ¥å£å±‚çº§é…ç½®çš„è¯·æ±‚å¤´ä¿¡æ¯
        }
    )     
    String send3(@Query("username") String username);

}
```

`@BaseRequest`æ³¨è§£ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²å±æ€§éƒ½å¯ä»¥é€šè¿‡[æ¨¡æ¿è¡¨è¾¾å¼](https://dt_flys.gitee.io/forest/#/?id=%E5%8D%81-%E6%A8%A1%E6%9D%BF%E8%A1%A8%E8%BE%BE%E5%BC%8F)å¼•ç”¨[å…¨å±€å˜é‡](https://dt_flys.gitee.io/forest/#/?id=_65-%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A)æˆ–æ–¹æ³•ä¸­çš„å‚æ•°ã€‚

```java
/** 
 * è‹¥å…¨å±€å˜é‡ä¸­å·²å®šä¹‰ baseUrl å’Œ acceptï¼Œ
 * ä¾¿ä¼šå°†å…¨å±€å˜é‡ä¸­çš„å€¼ç»‘å®šåˆ° @BaseRequest çš„å±æ€§ä¸­
 */
@BaseRequest(
    baseURL = "${baseUrl}",     // é»˜è®¤åŸŸå
    headers = {
        "Accept:${accept}"      // é»˜è®¤è¯·æ±‚å¤´
    }
)
public interface MyClient {

    // æ–¹æ³•çš„URLçš„åŸŸåå°†ä¼šå¼•ç”¨å…¨å±€å˜é‡ä¸­å®šä¹‰çš„ baseUrl
    @Get("/hello/user")     
    String send1(@Query("username") String username);

    // @BaseRequest ä¸­çš„å±æ€§äº¦å¯ä»¥å¼•ç”¨æ–¹æ³•ä¸­çš„ç»‘å®šå˜é‡åçš„å‚æ•°
    @Get("/hello/user")
    String send2(@Var("baseUrl") String baseUrl);
  

}

```

## æ–¹æ³•æ³¨è§£

åœ¨ Forest ä¸­ï¼Œæ–¹æ³•æ³¨è§£ï¼ˆé™¤äº†`@Post`è¿™ç±»è¯·æ±‚æ³¨è§£ä¹‹å¤–ï¼‰ä¹Ÿå¯ä»¥æ”¾ç½®åœ¨ interface æ¥å£ä¸Šï¼Œå…¶æ³¨è§£æ•ˆæœä¼šæ¶µç›–æ¥å£ä¸‹çš„æ‰€æœ‰æ–¹æ³•

å¦‚æœæ–¹æ³•ä¸Šæœ‰åŒæ ·çš„æ³¨è§£ï¼Œåˆ™ä¼šè¦†ç›–æ¥å£ä¸Šæ³¨è§£çš„é…ç½®ä¿¡æ¯

```java
/**
 * @Backend æ˜¯ä¸€ä¸ªæ–¹æ³•ç»´åº¦çš„æ³¨è§£ï¼Œä½†ä¹Ÿå¯ä»¥æŒ‚åœ¨æ¥å£ä¸Š
 * å®ƒå¯ä»¥ä¸ºæ¥å£ä¸‹çš„æ¯ä¸€ä¸ªæ–¹æ³•è¯·æ±‚è®¾ç½®HTTPåç«¯æ¡†æ¶
 * æ‰€ä»¥è¯¥æ¥å£ä¸‹æ‰€æœ‰è¯·æ±‚é»˜è®¤éƒ½ä¼šä½¿ç”¨ OkHttp3
 */
@Backend("okhttp3")
@Address(host = "localhost", port = "8080")
public interface MyClient {

    /**
     * ä½¿ç”¨æ¥å£é»˜è®¤åç«¯æ¡†æ¶ï¼Œå³ OkHttp3
     */
    @Post("/data1")
    String sendData1(@Body MyData data);

    /**
     * ä½¿ç”¨æ¥å£é»˜è®¤åç«¯æ¡†æ¶ï¼Œå³ OkHttp3
     */
    @Post("/data2")
    String sendData2(@Body MyData data);

    /**
     * ä½¿ç”¨äº†æ¥å£ä¸Šç›¸åŒçš„æ³¨è§£ @Backend
     * è¦†ç›–äº†æ”¹æ¥å£é»˜è®¤åç«¯æ¡†æ¶é…ç½®
     * æ‰€ä»¥è¯¥è¯·æ±‚ä¼šä½¿ç”¨ HttpClient ä½œä¸ºåç«¯æ¡†æ¶
     */
    @Backend("httpclient")
    @Post("/data3")
    String sendData3(@Body MyData data);

}


```
