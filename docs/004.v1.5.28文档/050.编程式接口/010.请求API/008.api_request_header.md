---
id: api_request_header
title: ğŸš… è¯·æ±‚å¤´
date: 2022-07-14 12:39:52
permalink: /pages/1.5.28/api_request_header/
---

ä¸€ä¸ªHTTPè¯·æ±‚ç”±è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ä¸‰éƒ¨åˆ†ç»„æˆã€‚å…¶ä¸­ï¼Œè¯·æ±‚å¤´æ˜¯HTTPè¯·æ±‚çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œç»å¸¸ç”¨äºä¼ é€’å’ŒæœåŠ¡ç«¯é€šè®¯çš„æ§åˆ¶å‚æ•°ã€æ•°æ®æ ¼å¼ã€è¯·æ±‚ç¼–ç ç­‰é‡è¦ä¿¡æ¯ã€‚

è¯·æ±‚å¤´ç”±é›¶åˆ°å¤šä¸ªå¤´å±æ€§æ„æˆï¼Œè€Œä¸€ä¸ªå¤´å±æ€§é€šå¸¸æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚

ForestRequest å¯¹è±¡æä¾›äº†æ·»åŠ å’Œä¿®æ”¹è¯·æ±‚å¤´çš„æ–¹æ³•

> `addHeader(String name, Object value)` æ·»åŠ è¯·æ±‚å¤´
>
>- å‚æ•° `name`: è¯·æ±‚å¤´åç§°
>
>- å‚æ•° `value`: è¯·æ±‚å¤´çš„å€¼

```java
// addHeaderæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¤´å±æ€§åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¤´å±æ€§çš„å€¼
// æ·»åŠ å¤´å±æ€§ Content-Typeï¼Œå€¼ä¸º application/json
request.addHeader("Content-Type", "application/json");
```

ä¸€ä¸ªè¯·æ±‚å¯ä»¥æ·»åŠ å¤šä¸ªå¤´å±æ€§

```java
request.addHeader("Accept", "text/plain")              // æ·»åŠ ç¬¬ä¸€ä¸ªå¤´å±æ€§
       .addHeader("Content-Type", "application/json")  // æ·»åŠ ç¬¬äºŒä¸ªå¤´å±æ€§
       .addHeader("AccessToken", "foobar");            // æ·»åŠ ç¬¬ä¸‰ä¸ªå¤´å±æ€§

// æœ€ç»ˆè¯·æ±‚åŒ…å«ä»¥ä¸‹å¤´å±æ€§ï¼š
// Accept: text/plain
// Content-Type: application/json
// AccessToken: foobar
```

ä¿®æ”¹å’Œè¦†ç›–ä¸€ä¸ªå·²å­˜åœ¨çš„å¤´å±æ€§

```java
request.addHeader("User-Agent", "httpclient") // æ·»åŠ ç¬¬ä¸€ä¸ªå¤´å±æ€§
       .addHeader("User-Agent", "forest");    // è¦†ç›–ç¬¬ä¸€ä¸ªå¤´å±æ€§
// æœ€ç»ˆè¯·æ±‚åŒ…å«ä»¥ä¸‹å¤´å±æ€§ï¼š
// User-Agent: forest
```

è·å–è¯·æ±‚å¤´

> `header(String name)` æ ¹æ®è¯·æ±‚å¤´åç§°è·å–è¯·æ±‚å¤´
>- å‚æ•° `name`: è¯·æ±‚å¤´åç§°
>- è¿”å›å€¼: è¯·æ±‚å¤´ï¼ŒForestHeader ç±»å®ä¾‹
>
> `headers()` è·å–æ‰€æœ‰è¯·æ±‚å¤´
>- è¿”å›å€¼: è¯·æ±‚å¤´è¡¨, ForestHeaderMap ç±»å®ä¾‹

```java
// åˆ›å»ºæ–°çš„è¯·æ±‚å¯¹è±¡
// url: http://localhost/test
ForestRequest<?> request = Forest.get("/")
        .addHeader("Accept", "text/plain")              // æ·»åŠ ç¬¬ä¸€ä¸ªå¤´å±æ€§
        .addHeader("Content-Type", "application/json")  // æ·»åŠ ç¬¬äºŒä¸ªå¤´å±æ€§
        
// é€šè¿‡ header æ–¹æ³•å¯ä»¥æ ¹æ®å¤´å±æ€§åè·å–è¯·æ±‚å¤´å¯¹è±¡
// å¹¶è¿”å› ForestHeader ç±»çš„å¯¹è±¡        
ForestHeader header1 = request.header("Accept");        // è·å–å¤´å±æ€§ Accept
ForestHeader header2 = request.header("Content-Type");  // è·å–å¤´å±æ€§ Content-Type
// é€šè¿‡ headers æ–¹æ³•å¯ä»¥è·å–è¯¥è¯·æ±‚çš„æ‰€æœ‰è¯·æ±‚å¤´ä¿¡æ¯
// å¹¶è¿”å› ForestHeaderMap ç±»å¯¹è±¡
ForestHeaderMap headerMap = request.headers();          // è·å–è¯·æ±‚çš„æ‰€æœ‰è¯·æ±‚å¤´
// é€šè¿‡ headerValue æ–¹æ³•å¯ä»¥æ ¹æ®å¤´å±æ€§åè·å–è¯·æ±‚å¤´çš„å±æ€§å€¼
// å¹¶è¿”å›å±æ€§å€¼å­—ç¬¦ä¸²
String headerValue1 = request.headerValue("Accept");          // è·å–å¤´å±æ€§ Accept çš„å±æ€§å€¼
String headerValue2 = request.headerValue("Content-Type");    // è·å–å¤´å±æ€§ Accept çš„å±æ€§å€¼
```

## ç‰¹æ®Šè¯·æ±‚å¤´

Forestä¸ºä¸€äº›ç‰¹æ®Šå¤´å±æ€§å®šä¹‰ä¸“æœ‰çš„æ–¹æ³•ï¼Œä¸ç”¨åœ¨ addHeader æ–¹æ³•ä¸­ä¼ å…¥å¤´å±æ€§åäº†ï¼Œæ¯”å¦‚: Content-Type

> `contentType(String contentType)` è®¾ç½®è¯·æ±‚å¤´ Content-Type çš„å€¼
>- å‚æ•° `contentType`: è¯·æ±‚å¤´ Content-Type çš„å€¼

```java
// è®¾ç½®å¤´å±æ€§ Content-Type çš„å€¼ä¸º application/json
request.contentType("application/json");
```

Forestä¹Ÿä¸º `Content-Type` å¸¸ç”¨å±æ€§å€¼çš„è®¾ç½®æä¾›äº†å¿«æ·æ–¹æ³•

```java
// è®¾ç½®å¤´å±æ€§ Content-Type: application/x-www-form-urlencoded
request.contentFormUrlEncoded();
// è®¾ç½®å¤´å±æ€§ Content-Type: application/json
request.contentTypeJson();
// è®¾ç½®å¤´å±æ€§ Content-Type: application/xml
request.contentTypeXml();
// è®¾ç½®å¤´å±æ€§ Content-Type: multipart/form-data
request.contentTypeMultipartFormData();
// è®¾ç½®å¤´å±æ€§ Content-Type: application/octet-stream
request.contentTypeOctetStream();
```
