---
id: build_interface
title: ğŸ§± æ„å»ºæ¥å£
date: 2022-07-01 12:44:20
permalink: /pages/1.6.x/build_interface/
---

åœ¨ Forest ä¾èµ–åŠ å…¥å¥½ä¹‹åï¼Œå°±å¯ä»¥æ„å»º HTTP è¯·æ±‚çš„æ¥å£äº†ã€‚

åœ¨ Forest ä¸­ï¼Œæ‰€æœ‰çš„ HTTP è¯·æ±‚ä¿¡æ¯éƒ½è¦ç»‘å®šåˆ°æŸä¸€ä¸ªæ¥å£çš„æ–¹æ³•ä¸Šï¼Œä¸éœ€è¦ç¼–å†™å…·ä½“çš„ä»£ç å»å‘é€è¯·æ±‚ã€‚è¯·æ±‚å‘é€æ–¹é€šè¿‡è°ƒç”¨äº‹å…ˆå®šä¹‰å¥½ HTTP è¯·æ±‚ä¿¡æ¯çš„æ¥å£æ–¹æ³•ï¼Œè‡ªåŠ¨å»æ‰§è¡Œ HTTP å‘é€è¯·æ±‚çš„è¿‡ç¨‹ï¼Œå…¶å…·ä½“å‘é€è¯·æ±‚ä¿¡æ¯å°±æ˜¯è¯¥æ–¹æ³•å¯¹åº”ç»‘å®šçš„ HTTP è¯·æ±‚ä¿¡æ¯ã€‚


### ç®€å•è¯·æ±‚

åˆ›å»ºä¸€ä¸ª`interface`ï¼Œå¹¶ç”¨`@Request`æ³¨è§£ä¿®é¥°æ¥å£æ–¹æ³•ã€‚

```java
public interface MyClient {

    @Request("http://localhost:8080/hello")
    String simpleRequest();

}
```

é€šè¿‡`@Request`æ³¨è§£ï¼Œå°†ä¸Šé¢çš„`MyClient`æ¥å£ä¸­çš„`simpleRequest()`æ–¹æ³•ç»‘å®šäº†ä¸€ä¸ª HTTP è¯·æ±‚ï¼Œ
å…¶ URL ä¸º`http://localhost:8080/hello`
ï¼Œå¹¶é»˜è®¤ä½¿ç”¨`GET`æ–¹å¼ï¼Œä¸”å°†è¯·æ±‚å“åº”çš„æ•°æ®ä»¥`String`çš„æ–¹å¼è¿”å›ç»™è°ƒç”¨è€…ã€‚

### ç¨å¤æ‚ç‚¹çš„è¯·æ±‚

```java
public interface MyClient {

    @Request(
            url = "http://localhost:8080/hello/user",
            headers = "Accept: text/plain"
    )
    String sendRequest(@Query("uname") String username);
}
```

ä¸Šé¢çš„`sendRequest`æ–¹æ³•ç»‘å®šçš„ HTTP è¯·æ±‚ï¼Œå®šä¹‰äº† URL ä¿¡æ¯ï¼Œä»¥åŠæŠŠ`Accept:text/plain`åŠ åˆ°äº†è¯·æ±‚å¤´ä¸­ï¼Œ
æ–¹æ³•çš„å‚æ•°`String username`ç»‘å®šäº†æ³¨è§£`@Query("uname")`ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†è°ƒç”¨è€…ä¼ å…¥å…¥å‚ username æ—¶ï¼Œè‡ªåŠ¨å°†`username`çš„å€¼åŠ å…¥åˆ° HTTP çš„è¯·æ±‚å‚æ•°`uname`ä¸­ã€‚

å¦‚æœè°ƒç”¨æ–¹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

<code-group>

<code-block title="Springboot / Spring" active>

```java
@Resource
MyClient myClient;

myClient.sendRequest("foo");
```
</code-block>
<code-block title="åŸç”Ÿ Java">

```java
MyClient myClient = Forest.client(MyClient.class);

myClient.sendRequest("foo");
```

</code-block>
</code-group>


è¿™æ®µè°ƒç”¨æ‰€å®é™…äº§ç”Ÿçš„ HTTP è¯·æ±‚å¦‚ä¸‹ï¼š

    GET http://localhost:8080/hello/user?uname=foo
    HEADER:
        Accept: text/plain
