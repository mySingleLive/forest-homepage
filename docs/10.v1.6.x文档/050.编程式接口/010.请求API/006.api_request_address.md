---
id: api_request_address
title: ğŸ”® è¯·æ±‚åœ°å€
date: 2022-07-14 12:36:38
permalink: /pages/1.6.x/api_request_address/
---

## URLåœ°å€

ForestRequest å¯¹è±¡æä¾›è®¾ç½®/è·å–URLåœ°å€çš„æ¥å£æ–¹æ³•

`url(String url)` è®¾ç½®è¯·æ±‚URL
- å‚æ•° `url` : URLå­—ç¬¦ä¸²

`url(ForestURL url)` è®¾ç½®è¯·æ±‚URL
- å‚æ•° `url` : ForestURL ç±»å®ä¾‹

```java
// è®¾ç½®è¯·æ±‚URLåœ°å€ï¼Œurl: http://127.0.0.1:8080/test
request.url("http://127.0.0.1:8080/test");
// è®¾ç½®è·¯å¾„ä¸º /abc, ä¸»æœºåœ°å€å’Œç«¯å£éƒ¨åˆ†ä¿ç•™ï¼Œurl: http://127.0.0.1:8080/abc
request.url("/abc");
// è¦†ç›–æ‰æ•´ä¸ªURLåœ°å€ï¼Œurl: http://forest.dtflyx.com/111
request.url("http://forest.dtflyx.com/111");
// ä½¿ç”¨ ForestURL ç±»å‹å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œurl: http://localhost:8080/222
request.url(new ForestURL(new URL("http://localhost:8080/222")));
```

`host(String host)` è®¾ç½®URLçš„ä¸»æœºå/åŸŸå/IPåœ°å€éƒ¨åˆ†
- å‚æ•° `host` : ä¸»æœºå/åŸŸå/IPåœ°å€

```java
// ä¿®æ”¹è¯·æ±‚åœ°å€ä¸­çš„ä¸»æœºå/IPåœ°å€/åŸŸåéƒ¨åˆ†ï¼Œurl: http://127.0.0.1:8080/222
request.host("127.0.0.1");
// åŒä¸Šï¼Œä¿®æ”¹è¯·æ±‚åœ°å€ä¸­çš„ä¸»æœºå/IPåœ°å€/åŸŸåéƒ¨åˆ†
request.url().setHost("127.0.0.1");
```

`port(int port)` è®¾ç½®URLä¸­çš„ç«¯å£
- å‚æ•° `port` : ç«¯å£å·

```java
// ä¿®æ”¹è¯·æ±‚åœ°å€ä¸­çš„ç«¯å£å·ï¼Œurl: http://127.0.0.1:8888/222
request.port(8888);
// åŒä¸Šï¼Œä¿®æ”¹è¯·æ±‚åœ°å€ä¸­çš„ç«¯å£å·
request.url().setPort(8888);
```

`scheme(String scheme)` è®¾ç½®URLä¸­çš„HTTPåè®®å¤´
- å‚æ•° `scheme` : HTTPåè®®å¤´

```java
// ä¿®æ”¹è¯·æ±‚åœ°å€ä¸­çš„HTTPåè®®å¤´ï¼Œurl: https://127.0.0.1:8888/222
request.scheme("https");
// åŒä¸Šï¼Œä¿®æ”¹è¯·æ±‚åœ°å€ä¸­çš„HTTPåè®®å¤´
request.url().setScheme("https");
```

`path(String path)` è®¾ç½®URLè·¯å¾„
- å‚æ•° `path` : URLè·¯å¾„

```java
// ä¿®æ”¹è¯·æ±‚åœ°å€ä¸­çš„è·¯å¾„éƒ¨åˆ†ï¼Œå’Œurlæ–¹æ³•ç±»ä¼¼ï¼Œä½†pathæ–¹æ³•ä¸æ¥å—å®Œæ•´urlåœ°å€ä½œä¸ºå‚æ•°ï¼Œurl: https://127.0.0.1:8888/333
request.path("/333");
// åŒä¸Šï¼Œä¿®æ”¹è¯·æ±‚åœ°å€ä¸­çš„è·¯å¾„éƒ¨åˆ†
request.url().setPath("/333");
```

`ref(String ref)` è®¾ç½®Reference, å³URLäº•å·åé¢çš„å­—ç¬¦ä¸²
- å‚æ•° `ref`: URLäº•å·åé¢çš„å­—ç¬¦ä¸²

```java
// è®¾ç½®Referenceï¼Œå³URLäº•å·åé¢çš„å­—ç¬¦ä¸²ï¼Œurl: https://127.0.0.1:8888/333#hello
request.ref("hello");
```

## è·å–URLåœ°å€

`urlString()` è·å–è¯·æ±‚URLå­—ç¬¦ä¸²
- è¿”å›å€¼ : URLå­—ç¬¦ä¸²

`url()` è·å–è¯·æ±‚URL
- è¿”å›å€¼ : ForestURL ç±»å®ä¾‹

```java
// è·å–URLåœ°å€å­—ç¬¦ä¸²
// å¦‚ï¼šhttp://localhost:8080/test
String urlStr = request.urlString();
// è·å–ForestURLç±»å¯¹è±¡
ForestURL url = request.url();
```

`schema()` è·å–è¯·æ±‚åœ°å€çš„HTTPåè®®å¤´
- è¿”å›å€¼ : HTTPåè®®å¤´

```java
// è·å–URLåœ°å€çš„HTTPåè®®å¤´
String schema = request.scheme();
```

`host()` è·å–URLä¸­çš„ä¸»æœºå/åŸŸå/IPåœ°å€éƒ¨åˆ†
- è¿”å›å€¼ : ä¸»æœºå/åŸŸå/IPåœ°å€éƒ¨åˆ†å­—ç¬¦ä¸²

```java
// è·å–è¯·æ±‚åœ°å€ä¸­çš„ä¸»æœºå/IPåœ°å€/åŸŸåéƒ¨åˆ†
String host = request.host();
// åŒä¸Šï¼Œè·å–è¯·æ±‚åœ°å€ä¸­çš„ä¸»æœºå/IPåœ°å€/åŸŸåéƒ¨åˆ†
host = request.url().getHost();
```

`port()` è·å–URLä¸­çš„ç«¯å£å·
- è¿”å›å€¼ : int æ•´æ•°, URLä¸­çš„ç«¯å£å·

```java
// è·å–è¯·æ±‚åœ°å€ä¸­çš„ç«¯å£å·
// å¦‚ï¼š8080
// é»˜è®¤ä¸º -1, å³æ²¡æœ‰ç«¯å£å·
// æ²¡æœ‰ç«¯å£å·ä¹Ÿå¯ä»¥ç†è§£ä¸º http ä¸‹çš„ 80 å’Œ https ä¸‹çš„ 443
int port = request.port();
// åŒä¸Šï¼Œè·å–è¯·æ±‚åœ°å€ä¸­çš„ç«¯å£å·
port = request.url().getPort();
```

`path()` è·å–URLè·¯å¾„
- è¿”å›å€¼: URLè·¯å¾„

```java
// è·å–è¯·æ±‚åœ°å€ä¸­çš„è·¯å¾„éƒ¨åˆ†ï¼Œå¦‚ï¼š/test
String path = request.path();
// åŒä¸Šï¼Œè·å–è¯·æ±‚åœ°å€ä¸­çš„è·¯å¾„éƒ¨åˆ†
path = request.url().getPath();
```

> `ref()` è·å–Reference, å³URLäº•å·åé¢çš„å­—ç¬¦ä¸²
>- è¿”å›å€¼: URLäº•å·åé¢çš„å­—ç¬¦ä¸²


```java
// è·å–Referenceï¼Œå³URLäº•å·åé¢çš„å­—ç¬¦ä¸²
// å¦‚ï¼šhttp://localhost/test#hello ä¸­çš„ hello é‚£éƒ¨åˆ†å­—ç¬¦ä¸²
request.ref(); 
```

## ä¸»æœºåœ°å€

ä¸»æœºåœ°å€åŒ…å«: ä¸»æœºå/IPåœ°å€/åŸŸå + ç«¯å£å·

ä½¿ç”¨ address æ–¹æ³•çš„å¥½å¤„æ˜¯ï¼Œåªä¼šä¿®æ”¹ä¸»æœºåæˆ–ç«¯å£ï¼Œä¸ä¼šå½±å“URLçš„å…¶å®ƒéƒ¨åˆ†ï¼ˆæ¯”å¦‚ Query å‚æ•°ï¼ŒHTTPåè®®å¤´ï¼Œè·¯å¾„éƒ¨åˆ†ç­‰ç­‰ï¼‰

> `address(String host, int port)` è®¾ç½®è¯·æ±‚çš„ä¸»æœºåœ°å€(ä¸»æœºå/åŸŸå/IPåœ°å€ + ç«¯å£å·)
>- å‚æ•° `host`: ä¸»æœºå/åŸŸå/IPåœ°å€
>- å‚æ•° `port`: ç«¯å£å·

```java
// åˆ›å»ºæ–°çš„è¯·æ±‚å¯¹è±¡
// url: http://localhost/test
Forest.get("/test")
     // è®¾ç½®è¯·æ±‚ä¸»æœºåœ°å€ï¼Œä¸ä¼šæ”¹å˜URLåœ°å€çš„å…¶å®ƒéƒ¨åˆ†
     // å‚æ•°1ï¼šä¸»æœºå/IPåœ°å€/åŸŸå
     // å‚æ•°2ï¼šç«¯å£å·
     // url: http://192.168.0.1:8881/test
    .address("192.168.0.1", 8881)
     // åŒä¸Šï¼Œè®¾ç½®è¯·æ±‚ä¸»æœºåœ°å€
     // å‚æ•°ä¸º ForestAddress å¯¹è±¡
     // url: http://192.168.0.2:8882/test
    .address(new ForestAddress("192.168.0.2", 8882));
```
