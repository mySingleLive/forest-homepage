---
id: non_spring_boot_config
title: ğŸ’ åŸç”ŸJavaç¯å¢ƒé…ç½®é¡¹
date: 2022-07-01 12:44:20
permalink: /pages/1.5.36/java_config_items/
---

è‹¥æ‚¨çš„é¡¹ç›®ä¸æ˜¯`Spring Boot`é¡¹ç›®ï¼Œæˆ–è€…æ²¡æœ‰ä¾èµ–`spring-boot-starter-forest`ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼å®šä¹‰ Forest é…ç½®ã€‚

### åˆ›å»º ForestConfiguration å¯¹è±¡

`ForestConfiguration`ä¸º Forest çš„å…¨å±€é…ç½®å¯¹è±¡ç±»ï¼Œæ‰€æœ‰çš„ Forest çš„å…¨å±€åŸºæœ¬é…ç½®ä¿¡æ¯ç”±æ­¤ç±»è¿›è¡Œç®¡ç†ã€‚

`ForestConfiguration`å¯¹è±¡çš„åˆ›å»ºæ–¹å¼ï¼šè°ƒç”¨é™æ€æ–¹æ³•`Forest.config()`ï¼Œæ­¤æ–¹æ³•ä¼šåˆ›å»º/è·å–å…¨å±€å”¯ä¸€çš„ ForestConfiguration å¯¹è±¡å¹¶åˆå§‹åŒ–é»˜è®¤å€¼ã€‚

```java
ForestConfiguration configuration = Forest.config();
```

### é…ç½®åç«¯ HTTP API

```java
configuration.setBackendName("okhttp3");
```

ç›®å‰ Forest æ”¯æŒ`okhttp3`å’Œ`httpclient`ä¸¤ç§åç«¯ HTTP APIï¼Œè‹¥ä¸é…ç½®è¯¥å±æ€§ï¼Œé»˜è®¤ä¸º`okhttp3`ã€‚

å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ”¹ä¸º`httpclient`

```java
configuration.setBackendName("httpclient");
```

### å…¨å±€åŸºæœ¬é…ç½®

```java
// è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼Œé»˜è®¤å€¼ä¸º500
configuration.setMaxConnections(123);
// æ¯ä¸ªè·¯ç”±çš„æœ€å¤§è¿æ¥æ•°ï¼Œé»˜è®¤å€¼ä¸º500
configuration.setMaxRouteConnections(222);
// [è‡ªv1.5.22ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—å¤§å°
configuration.setMaxRequestQueueSize(100);
// [è‡ªv1.5.21ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§å¼‚æ­¥çº¿ç¨‹æ•°
configuration.setMaxAsyncThreadSize(300);
// [è‡ªv1.5.22ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§å¼‚æ­¥çº¿ç¨‹æ± é˜Ÿåˆ—å¤§å°
configuration.setMaxAsyncQueueSize(16);
// è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’, é»˜è®¤å€¼ä¸º3000
configuration.setTimeout(3000);
// è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’, é»˜è®¤å€¼ä¸º2000
configuration.setConnectTimeout(2000);
// è®¾ç½®é‡è¯•å™¨
configuration.setRetryer(BackOffRetryer.class);
// è¯·æ±‚å¤±è´¥åé‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ä¸º0æ¬¡ä¸é‡è¯•
configuration.setMaxRetryCount(0);
// å•å‘éªŒè¯çš„HTTPSçš„é»˜è®¤SSLåè®®ï¼Œé»˜è®¤ä¸ºTLS
configuration.setSslProtocol("TLS");
// æ‰“å¼€æˆ–å…³é—­æ—¥å¿—ï¼Œé»˜è®¤ä¸ºtrue
configuration.setLogEnabled(true);
// [è‡ªv1.5.27ç‰ˆæœ¬èµ·å¯ç”¨] å¼‚æ­¥æ¨¡å¼ï¼ˆé»˜è®¤ä¸º platformï¼‰
configuration.setAsyncMode(ForestAsyncMode.PLATFORM);
```

:::warning æ³¨æ„
* è¿™é‡Œ<font color="green"><b>setRetryCount</b></font>åªæ˜¯ç®€å•æœºæ¢°çš„è¯·æ±‚å¤±è´¥åçš„é‡è¯•æ¬¡æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬å»ºè®®è®¾ç½®ä¸º<font color="green"><b>0</b></font>ã€‚
* å¦‚æœä¸€å®šè¦å¤šæ¬¡é‡è¯•ï¼Œè¯·ä¸€å®šè¦åœ¨ä¿è¯æœåŠ¡ç«¯çš„<font color="green"><b>å¹‚ç­‰æ€§</b></font>çš„åŸºç¡€ä¸Šè¿›è¡Œé‡è¯•ï¼Œå¦åˆ™å®¹æ˜“å¼•å‘ç”Ÿäº§äº‹æ•…ï¼
:::


### å…¨å±€å˜é‡å®šä¹‰

Forest å¯ä»¥é€šè¿‡`ForestConfiguration`å¯¹è±¡çš„`setVariableValue`æ–¹æ³•è‡ªå®šä¹‰å…¨å±€å˜é‡ã€‚

å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå˜é‡åï¼Œç¬¬äºŒä¸ªä¸ºå˜é‡å€¼ã€‚

å…¨å±€å˜é‡å¯ä»¥åœ¨ä»»ä½•æ¨¡æ¿è¡¨è¾¾å¼ä¸­è¿›è¡Œæ•°æ®ç»‘å®šã€‚

```java
ForestConfiguration configuration = ForestConfiguration.configuration();
...
configuration.setVariableValue("username", "foo");
configuration.setVariableValue("userpwd", "bar");
```
