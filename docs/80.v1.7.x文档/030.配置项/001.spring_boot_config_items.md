---
id: spring_boot_config
title: ğŸ‘œ Springbootç¯å¢ƒé…ç½®é¡¹
date: 2022-07-01 12:44:20
permalink: /pages/1.7.x/spring_boot_config_items/
---

è‹¥æ‚¨çš„é¡¹ç›®ä¾èµ–`Spring Boot`ï¼Œå¹¶åŠ å…¥äº†`spring-boot-starter-forest`ä¾èµ–ï¼Œå°±å¯ä»¥é€šè¿‡ `application.yml`/`application.properties` æ–¹å¼å®šä¹‰é…ç½®ã€‚

### é…ç½®åç«¯ HTTP API

<code-group>
  <code-block title="Yaml" active>
```Yaml
forest:
  backend: okhttp3 # é…ç½®åç«¯HTTP APIä¸º okhttp3
```
  </code-block>

  <code-block title="Properties">
  ```properties
# é…ç½®åç«¯HTTP APIä¸º okhttp3
forest.backend=okhttp3
  ```
  </code-block>
</code-group>


ç›®å‰ Forest æ”¯æŒ`okhttp3`å’Œ`httpclient`ä¸¤ç§åç«¯ HTTP APIï¼Œè‹¥ä¸é…ç½®è¯¥å±æ€§ï¼Œé»˜è®¤ä¸º`okhttp3`
å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ”¹ä¸º`httpclient`

<code-group>
  <code-block title="Yaml" active>
```Yaml
forest:
  backend: httpclient # é…ç½®åç«¯HTTP APIä¸º httpclient
```
  </code-block>

  <code-block title="Properties">
  ```properties
# é…ç½®åç«¯HTTP APIä¸º httpclient
forest.backend=httpclient
  ```
  </code-block>
</code-group>


### å…¨å±€åŸºæœ¬é…ç½®

åœ¨`application.yaml` / `application.properties`ä¸­é…ç½®çš„ HTTP åŸºæœ¬å‚æ•°

<code-group>
  <code-block title="Yaml" active>
```Yaml
forest:
  backend: okhttp3             # åç«¯HTTPæ¡†æ¶ï¼ˆé»˜è®¤ä¸º okhttp3ï¼‰
  max-connections: 1000        # è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆé»˜è®¤ä¸º 500ï¼‰
  max-route-connections: 500   # æ¯ä¸ªè·¯ç”±çš„æœ€å¤§è¿æ¥æ•°ï¼ˆé»˜è®¤ä¸º 500ï¼‰
  max-request-queue-size: 100  # [è‡ªv1.5.22ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—å¤§å°
  max-async-thread-size: 300   # [è‡ªv1.5.21ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§å¼‚æ­¥çº¿ç¨‹æ•°
  max-async-queue-size: 16     # [è‡ªv1.5.22ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§å¼‚æ­¥çº¿ç¨‹æ± é˜Ÿåˆ—å¤§å°
  timeout: 3000                # [å·²ä¸æ¨èä½¿ç”¨] è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆé»˜è®¤ä¸º 3000ï¼‰
  connect-timeout: 3000        # è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆé»˜è®¤ä¸º timeoutï¼‰
  read-timeout: 3000           # æ•°æ®è¯»å–è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆé»˜è®¤ä¸º timeoutï¼‰
  max-retry-count: 0           # è¯·æ±‚å¤±è´¥åé‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤ä¸º 0 æ¬¡ä¸é‡è¯•ï¼‰
  ssl-protocol: TLS            # å•å‘éªŒè¯çš„HTTPSçš„é»˜è®¤TLSåè®®ï¼ˆé»˜è®¤ä¸º TLSï¼‰
  log-enabled: true            # æ‰“å¼€æˆ–å…³é—­æ—¥å¿—ï¼ˆé»˜è®¤ä¸º trueï¼‰
  log-request: true            # æ‰“å¼€/å…³é—­Forestè¯·æ±‚æ—¥å¿—ï¼ˆé»˜è®¤ä¸º trueï¼‰
  log-response-status: true    # æ‰“å¼€/å…³é—­Forestå“åº”çŠ¶æ€æ—¥å¿—ï¼ˆé»˜è®¤ä¸º trueï¼‰
  log-response-content: true   # æ‰“å¼€/å…³é—­Forestå“åº”å†…å®¹æ—¥å¿—ï¼ˆé»˜è®¤ä¸º falseï¼‰
  async-mode: platform         # [è‡ªv1.5.27ç‰ˆæœ¬èµ·å¯ç”¨] å¼‚æ­¥æ¨¡å¼ï¼ˆé»˜è®¤ä¸º platformï¼‰
```
  </code-block>

  <code-block title="Properties">
  ```properties
# åç«¯HTTPæ¡†æ¶ï¼ˆé»˜è®¤ä¸º okhttp3ï¼‰
forest.backend=okhttp3
# è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆé»˜è®¤ä¸º 500ï¼‰
forest.max-connections=1000
# æ¯ä¸ªè·¯ç”±çš„æœ€å¤§è¿æ¥æ•°ï¼ˆé»˜è®¤ä¸º 500ï¼‰
forest.max-route-connections=500
# [è‡ªv1.5.22ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—å¤§å°
forest.max-request-queue-size=800
# [è‡ªv1.5.21ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§å¼‚æ­¥çº¿ç¨‹æ•°
forest.max-async-thread-size=300
# [è‡ªv1.5.22ç‰ˆæœ¬èµ·å¯ç”¨] æœ€å¤§å¼‚æ­¥çº¿ç¨‹æ± é˜Ÿåˆ—å¤§å°
forest.max-async-queue-size=16
# (å·²ä¸æ¨èä½¿ç”¨) è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆé»˜è®¤ä¸º 3000ï¼‰
forest.timeout=3000
# è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆé»˜è®¤ä¸º timeoutï¼‰
forest.connect-timeout=3000
# æ•°æ®è¯»å–è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆé»˜è®¤ä¸º timeoutï¼‰
forest.read-timeout=3000
# è¯·æ±‚å¤±è´¥åé‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤ä¸º 0 æ¬¡ä¸é‡è¯•ï¼‰
forest.max-retry-count=0
# å•å‘éªŒè¯çš„HTTPSçš„é»˜è®¤TLSåè®®ï¼ˆé»˜è®¤ä¸º TLSï¼‰
forest.ssl-protocol=TLS
# æ‰“å¼€æˆ–å…³é—­æ—¥å¿—ï¼ˆé»˜è®¤ä¸º trueï¼‰
forest.log-enabled=true
# æ‰“å¼€/å…³é—­Forestè¯·æ±‚æ—¥å¿—ï¼ˆé»˜è®¤ä¸º trueï¼‰
forest.log-request=true
# æ‰“å¼€/å…³é—­Forestå“åº”çŠ¶æ€æ—¥å¿—ï¼ˆé»˜è®¤ä¸º trueï¼‰
forest.log-response-status=true
# æ‰“å¼€/å…³é—­Forestå“åº”å†…å®¹æ—¥å¿—ï¼ˆé»˜è®¤ä¸º falseï¼‰
forest.log-response-content=true
# [è‡ªv1.5.27ç‰ˆæœ¬èµ·å¯ç”¨] å¼‚æ­¥æ¨¡å¼ï¼ˆé»˜è®¤ä¸º platformï¼‰
forest.async-mode=platform
  ```
  </code-block>
</code-group>


:::warning æ³¨æ„
* è¿™é‡Œ<font color="green"><b>max-retry-count</b></font>åªæ˜¯ç®€å•æœºæ¢°çš„è¯·æ±‚å¤±è´¥åçš„é‡è¯•æ¬¡æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬å»ºè®®è®¾ç½®ä¸º<font color="green"><b>0</b></font>ã€‚
* å¦‚æœä¸€å®šè¦å¤šæ¬¡é‡è¯•ï¼Œè¯·ä¸€å®šè¦åœ¨ä¿è¯æœåŠ¡ç«¯çš„<font color="green"><b>å¹‚ç­‰æ€§</b></font>çš„åŸºç¡€ä¸Šè¿›è¡Œé‡è¯•ï¼Œå¦åˆ™å®¹æ˜“å¼•å‘ç”Ÿäº§äº‹æ•…ï¼
:::

### å…¨å±€å˜é‡å®šä¹‰

Forest å¯ä»¥åœ¨`forest.variables`å±æ€§ä¸‹è‡ªå®šä¹‰å…¨å±€å˜é‡ã€‚

å…¶ä¸­ key ä¸ºå˜é‡åï¼Œvalue ä¸ºå˜é‡å€¼ã€‚

å…¨å±€å˜é‡å¯ä»¥åœ¨ä»»ä½•æ¨¡æ¿è¡¨è¾¾å¼ä¸­è¿›è¡Œæ•°æ®ç»‘å®šã€‚

<code-group>
  <code-block title="Yaml" active>
```Yaml
forest:
  variables:
    username: foo      # å£°æ˜å…¨å±€å˜é‡ï¼Œå˜é‡å: usernameï¼Œå˜é‡å€¼: foo
    userpwd: bar       # å£°æ˜å…¨å±€å˜é‡ï¼Œå˜é‡å: userpwdï¼Œå˜é‡å€¼: bar
```
  </code-block>

  <code-block title="Properties">
  ```properties
# å£°æ˜å…¨å±€å˜é‡ï¼Œå˜é‡å: usernameï¼Œå˜é‡å€¼: foo
forest.variables.username=foo
# å£°æ˜å…¨å±€å˜é‡ï¼Œå˜é‡å: userpwdï¼Œå˜é‡å€¼: bar
forest.variables.userpwd=bar
  ```
  </code-block>
</code-group>


### é…ç½® Bean ID

Forest å…è®¸æ‚¨åœ¨ yaml æ–‡ä»¶ä¸­é…ç½® Bean Idï¼Œå®ƒå¯¹åº”ç€`ForestConfiguration`å¯¹è±¡åœ¨ Spring ä¸Šä¸‹æ–‡ä¸­çš„ Bean åç§°ã€‚

<code-group>
  <code-block title="Yaml" active>
```Yaml
forest:
  bean-id: config0 # åœ¨springä¸Šä¸‹æ–‡ä¸­beançš„idï¼Œé»˜è®¤å€¼ä¸ºforestConfiguration
```
  </code-block>

  <code-block title="Properties">
  ```properties
# åœ¨springä¸Šä¸‹æ–‡ä¸­beançš„idï¼Œé»˜è®¤å€¼ä¸ºforestConfiguration
forest.bean-id: config0
  ```
  </code-block>
</code-group>


ç„¶åä¾¿å¯ä»¥åœ¨ Spring ä¸­é€šè¿‡ Bean çš„åç§°å¼•ç”¨åˆ°å®ƒ

```java
@Resource(name = "config0")
private ForestConfiguration config0;
```

